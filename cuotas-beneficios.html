<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto SEIS - Cuotas Sociales</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="css/cuotas.css">
</head>
<body>
    <div class="page-container cuotas-page">
        <div class="container">
            <div class="page-header cuotas-header">
                <h2>üí≥ SISTEMA DE CUOTAS SOCIALES</h2>
                <p>Control de Pagos Mensuales</p>
            </div>

            <div class="page-content">
                <div id="mensajeCuotas" class="mensaje-global" style="display: none;"></div>

                <!-- Informaci√≥n del Bombero -->
                <div class="bombero-info">
                    <h3>Informaci√≥n del Voluntario</h3>
                    <div class="bombero-datos" id="bomberoDatosCuotas"></div>
                </div>

                <!-- Formulario Cuota Social -->
                <div class="form-container">
                    <h3>üí∞ Registrar Pago de Cuota Social</h3>
                    
<form id="formCuotaSocial">
    <input type="hidden" id="bomberoCuotaId" name="bomberoCuotaId">
    
    <div class="form-grid">
        <div class="form-group">
            <label for="tipoCuota" class="required">Tipo de Cuota</label>
            <select id="tipoCuota" name="tipoCuota" required onchange="cuotasSistema.cambioTipoCuota()">
                <option value="">Seleccione tipo</option>
                <option value="regular">Cuota Regular - $5.000</option>
                <option value="estudiante">Cuota Estudiante - $3.000</option>
            </select>
        </div>

        <div class="form-group">
            <label for="anioCuota" class="required">A√±o</label>
            <input type="number" id="anioCuota" name="anioCuota" required 
                   min="2020" max="2030" value="2025">
        </div>

        <div class="form-group">
            <label for="fechaPagoCuota" class="required">Fecha de Pago</label>
            <input type="date" id="fechaPagoCuota" name="fechaPagoCuota" required>
        </div>

        <!-- CHECKBOXES DE MESES -->
        <div class="form-group full-width">
            <label class="required">Seleccione los meses a pagar</label>
            <div class="meses-checkbox-grid">
                <label class="checkbox-mes">
                    <input type="checkbox" name="meses" value="1">
                    <span class="checkbox-custom">‚úì</span>
                    <span class="mes-label">Enero</span>
                </label>
                <label class="checkbox-mes">
                    <input type="checkbox" name="meses" value="2">
                    <span class="checkbox-custom">‚úì</span>
                    <span class="mes-label">Febrero</span>
                </label>
                <label class="checkbox-mes">
                    <input type="checkbox" name="meses" value="3">
                    <span class="checkbox-custom">‚úì</span>
                    <span class="mes-label">Marzo</span>
                </label>
                <label class="checkbox-mes">
                    <input type="checkbox" name="meses" value="4">
                    <span class="checkbox-custom">‚úì</span>
                    <span class="mes-label">Abril</span>
                </label>
                <label class="checkbox-mes">
                    <input type="checkbox" name="meses" value="5">
                    <span class="checkbox-custom">‚úì</span>
                    <span class="mes-label">Mayo</span>
                </label>
                <label class="checkbox-mes">
                    <input type="checkbox" name="meses" value="6">
                    <span class="checkbox-custom">‚úì</span>
                    <span class="mes-label">Junio</span>
                </label>
                <label class="checkbox-mes">
                    <input type="checkbox" name="meses" value="7">
                    <span class="checkbox-custom">‚úì</span>
                    <span class="mes-label">Julio</span>
                </label>
                <label class="checkbox-mes">
                    <input type="checkbox" name="meses" value="8">
                    <span class="checkbox-custom">‚úì</span>
                    <span class="mes-label">Agosto</span>
                </label>
                <label class="checkbox-mes">
                    <input type="checkbox" name="meses" value="9">
                    <span class="checkbox-custom">‚úì</span>
                    <span class="mes-label">Septiembre</span>
                </label>
                <label class="checkbox-mes">
                    <input type="checkbox" name="meses" value="10">
                    <span class="checkbox-custom">‚úì</span>
                    <span class="mes-label">Octubre</span>
                </label>
                <label class="checkbox-mes">
                    <input type="checkbox" name="meses" value="11">
                    <span class="checkbox-custom">‚úì</span>
                    <span class="mes-label">Noviembre</span>
                </label>
                <label class="checkbox-mes">
                    <input type="checkbox" name="meses" value="12">
                    <span class="checkbox-custom">‚úì</span>
                    <span class="mes-label">Diciembre</span>
                </label>
            </div>
            <div class="meses-seleccionados-info">
                <strong>Total a pagar:</strong> <span id="totalAPagar">$0</span>
            </div>
        </div>

        <div class="form-group full-width">
            <label for="observacionesCuota" class="opcional">Observaciones</label>
            <textarea id="observacionesCuota" name="observacionesCuota" rows="2" 
                      placeholder="Observaciones adicionales (opcional)"></textarea>
        </div>
    </div>

    <div class="buttons">
        <button type="submit" class="btn btn-cuota">‚úÖ Registrar Pago de Cuota(s)</button>
        <button type="button" class="btn btn-secondary" onclick="cuotasSistema.limpiarFormulario()">Limpiar</button>
    </div>
</form>
                </div>

                <!-- Grid de Meses -->
                <div class="cuotas-grid">
                    <h3>üìä Estado de Cuotas del A√±o <span id="anioActualCuotas">2025</span></h3>
                    <div id="gridMesesCuotas" class="meses-grid"></div>
                </div>

                <!-- Historial de Cuotas -->
                <div class="list-container">
                    <div class="list-header">
                        <h3>üìö Historial de Pagos de Cuotas</h3>
                        <button type="button" class="btn btn-excel" onclick="cuotasSistema.exportarExcel()">
                            üìä Descargar Excel
                        </button>
                    </div>
                    
                    <div class="contador">
                        Total de pagos: <strong id="totalPagosCuotas">0</strong>
                    </div>
                    
                    <div id="listaCuotas" class="lista-items"></div>
                </div>

                <div class="navigation-buttons">
                    <button type="button" class="btn btn-volver" onclick="cuotasSistema.volverAlSistema()">
                        ‚Üê Regresar al Sistema Principal
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/auth.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/cuotas.js"></script>
</body>
</html>